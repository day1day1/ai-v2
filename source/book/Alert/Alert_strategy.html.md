# 报警策略

* [报警策略](#1)<br>
* [配置报警策略](#2)<br>

## <h2 id="1">报警策略</h2>
报警策略 为自动监控问题和问题处理提供了一种机制。你没有必要针对可能暗含问题的诸多情况，不断地查读指标和事件；但是可以主动定义一些能让你的应用平稳运行的最为相关的事件，然后创建一些措施，使得事件发生时，能够自动的进行一些操作。

## 策略结构
策略将策略触发器与将要采取的操作进行匹配，以响应触发过程。
![](/images/as01.png)

## 策略触发
策略触发就是导致策略触发的报警事件。 报警事件主要是指违反报警规则的事件，也就是应用的一些指标超过了报警规则中所设定的报警事件的阈值。<br><br>
触发事件广义上定义为在应用程序中影响任何对象的事件，狭义上定义为仅影响特定对象的事件。你可以创建一个策略，触发条件为：包含应用中所有层的某事件发生，或者只涉及特定层的某事件发生。你还可以创建这样一个策略，触发条件为：影响某些节点的事件发生，或者只影响某些业务交易或某些错误的事件发生。同时，你可以专门根据不同的实体和情况调整策略。<br><br>
例如，你可以从广义上定义一个策略，对于应用中的任何一个对象，无论什么时候，只要达到资源库的限制（例如，JVM的堆内存使用率，内存使用率或CPU使用率> 80％），该策略将被触发。<br><br>
当至少一个指定的对象中的至少一个指定触发事件发生，策略就被触发。

## 触发行为

为了响应策略触发器，你可以指定自动发生的一个或多个动作。<br><br>
也许最常见的动作就是通知：发送电子邮件（我们4.0.3-E版本仅支持邮件的发送）。<br><br>
其他类型的动作不仅仅是通知。<br><br>
由于健康规则的定义和动作的定义是分开的，且二者都可精确定义，因此你可以基于报警事件发生的层或节点，采取不同的措施以保证违例发生在相同的阈值。

## 策略列表

配置好的报警策略列表查看，选择 **报警 > 报警策略。**<br>
**报警策略** 列表展示了基于应用而创建的所有的策略，通过这里我们可以查看策略所包含的事件以及其可用性。同时我们可以同过 操作 里的按钮进行报警策略的修改。

## <h2 id="2">配置报警策略</h2>
报警测略的配置方法很简单，按照动策略向导进行即可。<br>
手动策略向导包含两个面板：<br>

* 触发策略设置：设置触发策略的事件，以及受该策略影响的对象；
* 触发行为设置：设置策略被触发时的动作。
在这两种面板都可以配置策略名称以及策略的启用状态。<br>
在进行报警策略之前需要进行：<br>
   1.  在顶部的菜单栏点击  报警；<br>
   2.  点击屏幕 左侧/右侧 的 报警策略；

## 配置触发策略
触发策略设置 面板定义了使策略触发，并调用其动作的事件和对象。<br>
由于我们的策略触发依赖于报警事件，所以我们需要在创建报警策略之前进行报警规则的创建。<br>

* 配置触发策略步骤：<br>
1.选择  创建策略 ，进行报警策略的配置。<br>
2.填写 策略名称。<br>
3.进行可用性选择，可用则选中打勾。<br>
4.选择会触发报警策略的报警事件的类型。<br>
5.选择 报警事件 相对应的报警规则。报警规则可以在已有的报警规则中选取，也可以进行 新的报警规则  的创建。新的报警规则的创建详见配置报警规则 。

## 配置触发行为
策略动作面板将动作和触发结合。它定义了当策略触发时，启动什么策略动作。<br>
必须在创建能够触发的策略之前，创建这些动作。详细信息见报警行为 。

**配置触发行为步骤：**<br>
   选择 触发行为设置 面板 ，进行报警行为——邮件 的添加。可以从已经创建的报警邮件中进行选择，也可以进行新的报警邮件行为的创建。<br>
   新的 报警行为 设置详见报警行为 。









